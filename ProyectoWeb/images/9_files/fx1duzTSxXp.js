/*!CK:3211992868!*//*1409777645,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["ZTN7b"]); }

__d("AbstractRangeInput.react",["Event","React","UserAgent_DEPRECATED","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){var l={BLOCK:'block',PUSH:'push',FREE:'free'},m=h.createClass({displayName:'AbstractRangeInput',propTypes:{name:h.PropTypes.string,min:h.PropTypes.number,max:h.PropTypes.number,step:h.PropTypes.number,disabled:h.PropTypes.bool,values:h.PropTypes.array,behavior:h.PropTypes.oneOf([l.BLOCK,l.PUSH,l.FREE]),onChange:h.PropTypes.func},getDefaultProps:function(){return {name:'',min:0,max:1,step:.01,disabled:false,values:[.5],behavior:l.FREE};},componentWillReceiveProps:function(n){this.setState({values:n.values});},componentWillUnmount:function(){for(var n in this._listeners){this._listeners[n]&&this._listeners[n].remove();this._listeners[n]=null;}},getInitialState:function(){var n=i.ie()<9?document.documentElement:window;this._listeners=g.listen(n,{selectstart:function(p){this.state.draggingIdx!==null&&g.prevent(p);}.bind(this),mousemove:this._onMouseMove,mouseup:this._onMouseUp});var o=this.props.values;if(this.props.behavior!==l.FREE)o.sort();return {values:o,draggingIdx:null};},_onMouseDown:function(event){g.prevent(event);var n=parseInt(event.target.getAttribute('data-value'),10);this.setState({draggingIdx:n,dragStartValue:this.state.values[n],dragStartX:event.nativeEvent.clientX,scale:event.nativeEvent.getTarget().parentNode.clientWidth});},_onMouseMove:function(event){if(this.state.draggingIdx!==null){var n=(event.clientX-this.state.dragStartX),o=(this.props.max-this.props.min)/this.state.scale,p=this.state.dragStartValue+(n*o),q=this.state.values,r=q.length,s=this.state.draggingIdx;if(this.props.step){var t=1/this.props.step;p=Math.round(p*t)/t;}var u=this.props.min,v=this.props.max;if(this.props.behavior===l.BLOCK){u=s>0?q[s-1]:u;v=s<r-1?q[s+1]:v;}p=p<u?u:p;p=p>v?v:p;q[s]=p;if(this.props.behavior===l.PUSH){for(var w=s+1,x=q.length;w<x;w++){if(q[w]>=p)break;q[w]=p;}for(w=s-1;w>=0;w--){if(q[w]<=p)break;q[w]=p;}}this.setState({values:q});this.props.onChange&&this.props.onChange(q);}},_onMouseUp:function(event){if(this.state.draggingIdx!==null)this.setState({draggingIdx:null});},render:function(){var n=this.state.values,o=this.props.max-this.props.min,p=[];for(var q=0,r=n.length;q<r;q++){var s=(n[q]-this.props.min)/o,t=this.props.name+(r>1?'['+q+']':'');p.push(h.createElement(h.DOM.div,{className:(("_4qwr")+(this.props.disabled?' '+"_4qws":'')),'data-value':q,key:'thumb-'+q,onDragStart:g.prevent,onMouseDown:this.props.disabled?null:this._onMouseDown,style:{left:(s*100)+'%'}},h.createElement(h.DOM.input,{onChange:this.props.onChange,name:t,value:n[q],type:"hidden"})));}return (h.createElement(h.DOM.div,Object.assign({},this.props,{className:k(this.props.className,"_4qwt")}),h.createElement(h.DOM.div,{className:"_4qwu"}),p));}});e.exports=m;},null);
__d("Spotlight.react",["LayerHideOnBlur","LayerHideOnEscape","ReactLayer","Spotlight"],function(a,b,c,d,e,f,g,h,i,j){var k=i.createClass({getDefaultEnabledBehaviors:function(){return {hideOnBlur:g,hideOnEscape:h};},createLayer:function(l){var m=this.enumerateBehaviors(this.props.behaviors),n={addedBehaviors:m,rootClassName:this.props.rootClassName},o=new j(n,l);o.conditionShow(this.props.shown);if(this.props.onBeforeHide)o.subscribe('beforehide',this.props.onBeforeHide);if(this.props.onHide)o.subscribe('hide',this.props.onHide);return o;},receiveProps:function(l){this.layer.conditionShow(l.shown);}});e.exports=k;},null);
__d("PhotoStoreCore",[],function(a,b,c,d,e,f){var g={actions:{UPDATE:'update'},_photoCache:{},_postCreateCallbacks:{},getPhotoCache:function(h){if(!this._photoCache[h])throw new Error('Photo cache requested for unknown set ID');return this._photoCache[h];},hasBeenCreated:function(h){return !!this._photoCache[h];},clearSetCache:function(h){delete this._photoCache[h];delete this._postCreateCallbacks[h];},getByIndex:function(h,i,j){return this.getPhotoCache(h).getItemAtIndex(i,j);},getByIndexImmediate:function(h,i){if(this._photoCache[h])return this._photoCache[h].getItemAtIndexImmediate(i);return undefined;},getItemsInAvailableRange:function(h){var i=this.getAvailableRange(h),j=[];for(var k=i.offset;k<i.length;k++)j.push(this.getByIndexImmediate(h,k));return j;},getItemsAfterIndex:function(h,i,j,k){var l=this.getCursorByIndexImmediate(h,i);this.fetchForward(h,l,j,k);},getAllByIDImmediate:function(h){var i=Object.keys(this._photoCache);return i.map(function(j){return this.getByIndexImmediate(j,this.getIndexForID(j,h));}.bind(this)).filter(function(j){return !!j;});},getIndexForID:function(h,i){if(this._photoCache[h])return this._photoCache[h].getIndexForID(i);return undefined;},getEndIndex:function(h){var i=this.getAvailableRange(h);return i.offset+i.length-1;},getCursorByIndexImmediate:function(h,i){var j=this.getByIndexImmediate(h,i);if(j)return this._photoCache[h].getCursorForID(j.id);return undefined;},hasNextPage:function(h){var i=this.getCursorByIndexImmediate(h,this.getEndIndex(h));return this.getPhotoCache(h).hasNextPage(i);},getAvailableRange:function(h){return this.getPhotoCache(h).getAvailableRange();},hasLooped:function(h){return this.getPhotoCache(h).hasLooped();},fetchForward:function(h,i,j,k){return this.getPhotoCache(h).getItemsAfterCursor(i,j,k);},fetchBackward:function(h,i,j,k){return this.getPhotoCache(h).getItemsBeforeCursor(i,j,k);},executePostCreate:function(h,i){if(this._photoCache[h]){i&&i();}else this._postCreateCallbacks[h]=i;},runPostCreateCallback:function(h){var i=this._postCreateCallbacks[h];if(i){i();delete this._postCreateCallbacks[h];}},setPreFetchCallback:function(h,i){this.getPhotoCache(h).setPreFetchCallback(i);},updateData:function(h){var i=h.set_id;if(!this._photoCache[i]){this._photoCache[i]=new h.cache_class(h);this.runPostCreateCallback(i);}else if(h.query_metadata.action==g.actions.UPDATE){this._photoCache[i].updateData(h);}else this._photoCache[i].addData(h);},updateFeedbackData:function(h){var i=Object.keys(h);i.forEach(function(j){return g.getAllByIDImmediate(j).forEach(function(k){k.feedback=h[j].feedback;});});}};e.exports=g;},null);
__d("PhotoStore",["Arbiter","PhotoStoreCore"],function(a,b,c,d,e,f,g,h){g.subscribe('update-photos',function(i,j){h.updateData(j);});e.exports=h;},null);
__d("PhotoViewState",["ArbiterMixin","PhotoStore","PhotoUtils","SpotlightViewerLoggingEvents","copyProperties","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=l(g);for(var n in m)if(m.hasOwnProperty(n))p[n]=m[n];var o=m===null?null:m.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=m;function p(q,r,s,t,u){"use strict";this._viewer=q;this._setID=r;this._updateCallback=t;this._position=s||0;this._preloaded={};this._reverse=u;}p.prototype._fetchCallback=function(q){"use strict";if(!this._viewer.isOpen())return;this._preload(q);this._log(j.DATA_FETCH_COMPLETE);};p.prototype._preload=function(q){"use strict";i.preload(this._viewer,q,function(r){this._preloaded[i.getFBIDFromData(r)]=true;}.bind(this));};p.prototype._preloadPhotosInRange=function(q,r){"use strict";var s=[];for(var t=q;t<=r;++t){var u=h.getByIndexImmediate(this._setID,t);if(u&&!this._isPreloaded(u))s.push(u);}this._preload(s);};p.prototype._isPreloaded=function(q){"use strict";return this._preloaded[i.getFBIDFromData(q)];};p.prototype.getPosition=function(){"use strict";return this._position;};p.prototype.isValidMovement=function(q){"use strict";if(!h.hasBeenCreated(this._setID))return false;if(h.hasLooped(this._setID))return true;var r=this._position+q,s=h.getAvailableRange(this._setID),t=s.offset+s.length-1;return r>=s.offset-1&&r<=t+1;};p.prototype.getRelativeMovement=function(q){"use strict";return h.getIndexForID(this._setID,q)-this._position;};p.prototype.moveCursor=function(q){"use strict";if(!this.isValidMovement(q))return false;this._position+=q;return true;};p.prototype._page=function(q){"use strict";if(!this.moveCursor(q))return;this._log(j.PAGE_BEGIN);var r=h.getByIndexImmediate(this._setID,this._position);if(!r){this.inform('photo_fetch');this._log(j.PHOTO_FETCH);}else if(!this._isPreloaded(r))this._preload([r]);h.getByIndex(this._setID,this._position,this._updateCallback);this._loadMoreIfNecessary(q>0,p.BUFFER_SIZE);this._log(j.PAGE_COMPLETE);};p.prototype.loadMoreForwardIfNecessary=function(q){"use strict";var r=h.getAvailableRange(this._setID),s=r.offset+r.length-1,t=this._position+q;if(t>s&&!h.hasLooped(this._setID)){var u=h.getCursorByIndexImmediate(this._setID,s);h.fetchForward(this._setID,u,q,this._fetchCallback.bind(this));}else this._preloadPhotosInRange(this._position+1,t);};p.prototype.loadMoreBackwardIfNecessary=function(q){"use strict";var r=h.getAvailableRange(this._setID),s=this._position-q;if(s<r.offset&&!h.hasLooped(this._setID)){var t=h.getCursorByIndexImmediate(this._setID,r.offset);h.fetchBackward(this._setID,t,q,this._fetchCallback.bind(this));}else this._preloadPhotosInRange(s,this._position-1);};p.prototype._loadMoreIfNecessary=function(q,r){"use strict";if(q){this.loadMoreForwardIfNecessary(r);}else this.loadMoreBackwardIfNecessary(r);};p.prototype.displayFirst=function(){"use strict";if(!this._viewer.isOpen())return;h.setPreFetchCallback(this._setID,function(){this._log(j.DATA_FETCH_BEGIN);}.bind(this));var q=function(r){if(!this._isPreloaded(r))this._preload([r]);this._updateCallback(r);}.bind(this);h.getByIndex(this._setID,this._position,q);if(this._reverse){this.loadMoreBackwardIfNecessary(p.BUFFER_SIZE);}else this.loadMoreForwardIfNecessary(p.BUFFER_SIZE);};p.prototype.backward=function(){"use strict";this._page(this._reverse?1:-1);};p.prototype.forward=function(){"use strict";this._page(this._reverse?-1:1);};p.prototype._log=function(q){"use strict";this._viewer.log(q);};k(p,{BUFFER_SIZE:4});e.exports=p;},null);
__d("SpotlightViewer",["React","ReactLayeredComponentMixin","Spotlight.react","cx"],function(a,b,c,d,e,f,g,h,i,j){var k=g.createClass({displayName:'SpotlightViewer',mixins:[h],renderLayers:function(){if(!this.props.open)return null;var l="_n3";if(this.props.className)l+=' '+this.props.className;return {photoLayer:g.createElement(i,{onBeforeHide:this.props.onBeforeHide,onHide:this.props.onHide,rootClassName:this.props.rootClassName,shown:this.props.open},g.createElement(g.DOM.div,{className:l,onClick:this.props.onClick},this.props.children))};},render:function(){return (g.createElement(g.DOM.div,null));}});e.exports=k;},null);
__d("SpotlightViewerBehaviorsMixin",["BehaviorsMixin","copyProperties"],function(a,b,c,d,e,f,g,h){var i={componentWillMount:function(){this.behaviors&&this.enableBehaviors(this.behaviors);},componentWillUnmount:function(){this.destroyBehaviors();}};h(i,g);e.exports=i;},null);
__d("SpotlightViewerImage",["React","cx"],function(a,b,c,d,e,f,g,h){var i=g.createClass({displayName:'SpotlightViewerImage',render:function(){return (g.createElement(g.DOM.img,{className:"_4-od",src:this.props.src,style:{width:this.props.dimensions.x,height:this.props.dimensions.y}}));}});e.exports=i;},null);
__d("SpotlightViewerCoreMixin",["PhotoLogger","PhotoStore","PhotoUtils","PhotoViewState","React","SpotlightViewerImage","SpotlightViewerLoggingEvents"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n={_displayFirstPhoto:function(){h.executePostCreate(this.props.setid,this.viewState.displayFirst.bind(this.viewState));},_getInitialPosition:function(){var o;if(!this.props.clearcache)o=h.getIndexForID(this.props.setid,this.props.photoid);if(o===undefined){h.clearSetCache(this.props.setid);o=0;}return o;},__displayPhoto:function(){var o=this._getInitialPosition();this.viewState=new j(this,this.props.setid,o,this._updatePhoto,this.props.reverse);this.inform('open');this._displayFirstPhoto();},componentWillMount:function(){this._logger=new g(this.getViewerID());this.log(m.OPEN_BEGIN);this.__displayPhoto();},componentDidMount:function(){this._enableSubscriptions&&this._enableSubscriptions();this.log(m.OPEN_COMPLETE);},isOpen:function(){return this.state.open;},close:function(){if(!this.isOpen())return;this.log(m.CLOSE_BEGIN);this.setState({open:false},function(){this.inform('close');this.log(m.CLOSE_COMPLETE);});},componentWillUnmount:function(){this.viewState=null;},_onClickViewport:function(o){o?this.viewState.forward():this.viewState.backward();},_getMedia:function(o,p){return (k.createElement(l,{ref:"image",src:o.uri,dimensions:p.imageDimensions}));},_getCurrentFBID:function(){return i.getFBIDFromData(this.state.photoData);},_updatePhoto:function(o){this.log(m.PHOTO_CHANGE_BEGIN);this.setState({photoData:o},function(){this.inform('photo_change',this.state.photoData);this.log(m.PHOTO_CHANGE_COMPLETE);});},getLogger:function(){return this._logger;},log:function(o){this._logger&&this._logger.logEvent(o);}};e.exports=n;},null);
__d("SpotlightViewerStageResizer",["Event","SubscriptionsHandler","Vector"],function(a,b,c,d,e,f,g,h,i){var j=520;function k(l,m){"use strict";this._subscriptionsHandler=new h();this._subscriptionsHandler.addSubscriptions(g.listen(window,'resize',this._resetStageDimensions.bind(this)));this._dimensions=l;this._minHeight=m.minHeight||j;this._minWidth=m.minWidth||j;this._resetStageDimensions();}k.prototype.destroy=function(){"use strict";this._dimensions=null;this._subscriptionsHandler.release();};k.prototype._resetStageDimensions=function(){"use strict";this._currentStageDimensions=new i(this._minWidth,this._minHeight);};k.prototype.getImageAndStageDimensions=function(l){"use strict";var m=this._dimensions.getBestFitDimensionsFromPhoto(l,this._dimensions.getMaxStageDimensions()),n=this._dimensions.getStageDimensions(m);this._currentStageDimensions=new i(Math.max(n.x,this._minWidth,this._currentStageDimensions.x),Math.max(n.y,this._minHeight,this._currentStageDimensions.y));var o=this._dimensions.getImageDimensionsForStage(m,this._currentStageDimensions);return {stageDimensions:this._currentStageDimensions,imageDimensions:o};};k.prototype.getCurrentStageDimensions=function(){"use strict";return this._currentStageDimensions;};e.exports=k;},null);
__d("SpotlightViewerDimensionMixin",["SpotlightViewerStageResizer","PhotoViewerDimensions"],function(a,b,c,d,e,f,g,h){var i={getInitialState:function(){this._dimensions=new h({verticalPadding:this.props.verticalPadding,horizontalPadding:this.props.horizontalPadding});this._resizer=new g(this._dimensions,{minHeight:this.props.minHeight,minWidth:this.props.minWidth});return {maxStageDimensions:this._dimensions.getMaxStageDimensions()};},componentWillUnmount:function(){this._resizer&&this._resizer.destroy();this._resizer=null;this._dimensions&&this._dimensions.destroy();this._dimensions=null;},getMedia:function(){if(this.state.photoData){var j=this._resizer.getImageAndStageDimensions(this.state.photoData),k=this._dimensions.getBestFitImageFromPhoto(this.state.photoData,this.state.maxStageDimensions);return this._getMedia(k,j);}else return null;},getDimensions:function(){return this._dimensions;},getStageDimensions:function(){if(this.state.photoData){return this._resizer.getImageAndStageDimensions(this.state.photoData).stageDimensions;}else return this._dimensions.getMaxStageDimensions();},getImageDimensions:function(){if(!this.state.photoData)return null;return this._resizer.getImageAndStageDimensions(this.state.photoData).imageDimensions;},onResize:function(){this.setState({maxStageDimensions:this._dimensions.getMaxStageDimensions()});}};e.exports=i;},null);
__d("SpotlightViewerInit",["DOM","React"],function(a,b,c,d,e,f,g,h){var i={render:function(j,k){var l=g.create('div');j=h.renderComponent(j,l);g.appendContent(document.body,l);j.subscribeOnce('close',function(){j.unmountComponent();g.remove(l);k&&k();});return j;}};e.exports=i;},null);
__d("SpotlightViewerAutoResize",["Event","SubscriptionsHandler","invariant"],function(a,b,c,d,e,f,g,h,i){function j(k){"use strict";this.$SpotlightViewerAutoResize0=k;i(typeof this.$SpotlightViewerAutoResize0.onResize==='function');}j.prototype.enable=function(){"use strict";this.$SpotlightViewerAutoResize1=new h();this.$SpotlightViewerAutoResize1.addSubscriptions(g.listen(window,'resize',this.$SpotlightViewerAutoResize0.onResize.bind(this.$SpotlightViewerAutoResize0)));};j.prototype.disable=function(){"use strict";this.$SpotlightViewerAutoResize1.release();delete this.$SpotlightViewerAutoResize1;};e.exports=j;},null);
__d("PhotoZoomCropDimensions",["BasicVector","clip"],function(a,b,c,d,e,f,g,h){var i=320,j=.5,k=.5,l=180,m=.015,n=3;function o(q,r){return Number(q.toFixed(r||n));}p.prototype.clone=function(){"use strict";return new p(this.$PhotoZoomCropDimensions0).setSize(this.$PhotoZoomCropDimensions1.x,this.$PhotoZoomCropDimensions1.y).setSmallestSize(this.$PhotoZoomCropDimensions2.x,this.$PhotoZoomCropDimensions2.y).setCenter(this.$PhotoZoomCropDimensions3.x,this.$PhotoZoomCropDimensions3.y).setZoom(this.$PhotoZoomCropDimensions4);};function p(q){"use strict";this.$PhotoZoomCropDimensions0=q;this.setSmallestSize(l,l).setCenter(j,j);this.setSize(i,i).setZoom(k);}p.prototype.getArea=function(){"use strict";var q=this.getPosition(),r=this.$PhotoZoomCropDimensions1.div(this.$PhotoZoomCropDimensions4);return {height:Math.round(r.y),width:Math.round(r.x),x:Math.round(Math.abs(q.left)/this.$PhotoZoomCropDimensions4),y:Math.round(Math.abs(q.top)/this.$PhotoZoomCropDimensions4)};};p.prototype.getPosition=function(){"use strict";var q=this.$PhotoZoomCropDimensions5();return {height:o(q.imageSize.y),left:o(this.$PhotoZoomCropDimensions1.x/2-q.center.x),top:o(this.$PhotoZoomCropDimensions1.y/2-q.center.y),width:o(q.imageSize.x)};};p.prototype.getRect=function(){"use strict";var q=this.$PhotoZoomCropDimensions5(),r=this.$PhotoZoomCropDimensions1.div(this.$PhotoZoomCropDimensions4);return {center:{x:q.center.x/q.imageSize.x,y:q.center.y/q.imageSize.y},size:{x:r.x,y:r.y}};};p.prototype.getSize=function(){"use strict";return this.$PhotoZoomCropDimensions1;};p.prototype.getZoom=function(){"use strict";return this.$PhotoZoomCropDimensions4;};p.prototype.getZoomRange=function(){"use strict";var q=Math.min(this.$PhotoZoomCropDimensions0.x,this.$PhotoZoomCropDimensions0.y);return {max:this.$PhotoZoomCropDimensions1.x/Math.min(this.$PhotoZoomCropDimensions2.x,q),min:this.$PhotoZoomCropDimensions1.x/q};};p.prototype.hasSpaceToDrag=function(){"use strict";var q=this.getPosition(),r=this.getSize(),s=r.x*m,t=r.y*m,u=Math.abs(q.left),v=q.width-(u+r.x),w=Math.abs(q.top),x=q.height-(w+r.y);return (u>s||v>s||w>t||x>t);};p.prototype.moveByPixels=function(q,r){"use strict";var s=this.$PhotoZoomCropDimensions5();return this.moveBy(q/s.imageSize.x,r/s.imageSize.y);};p.prototype.moveBy=function(q,r){"use strict";this.setCenter(this.$PhotoZoomCropDimensions3.x+q,this.$PhotoZoomCropDimensions3.y+r);var s=this.$PhotoZoomCropDimensions5();this.$PhotoZoomCropDimensions3=s.center.div(s.imageSize.x,s.imageSize.y);return this;};p.prototype.setCenter=function(q,r){"use strict";this.$PhotoZoomCropDimensions3=new g(h(q,0,1),h(r,0,1));return this;};p.prototype.setSize=function(q,r){"use strict";this.$PhotoZoomCropDimensions1=new g(q,r);return this;};p.prototype.setSmallestSize=function(q,r){"use strict";this.$PhotoZoomCropDimensions2=new g(q,r);return this;};p.prototype.setZoom=function(q){"use strict";var r=this.getZoomRange();this.$PhotoZoomCropDimensions4=h(q,r.min,r.max);return this;};p.prototype.$PhotoZoomCropDimensions6=function(q,r){"use strict";var s=this.$PhotoZoomCropDimensions1.x/2,t=this.$PhotoZoomCropDimensions1.y/2;return new g(h(r.x,s,q.x-s),h(r.y,t,q.y-t));};p.prototype.$PhotoZoomCropDimensions5=function(){"use strict";var q=this.$PhotoZoomCropDimensions0.mul(this.$PhotoZoomCropDimensions4);return {imageSize:q,center:this.$PhotoZoomCropDimensions6(q,this.$PhotoZoomCropDimensions3.mul(q.x,q.y))};};e.exports=p;},null);
__d("PhotoZoomCropImagePreview.react",["React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i){var j=g.createClass({displayName:'PhotoZoomCropImagePreview',propTypes:{dimensions:g.PropTypes.object,size:g.PropTypes.object,src:g.PropTypes.string},render:function(){var k=this.props.dimensions,l=this.props.size,m=k.getSize().x/l.x;if(m!==1)k=k.clone().setSize(l.x,l.y).setZoom(k.getZoom()/m);return (g.createElement(g.DOM.div,Object.assign({},this.props,{className:i(this.props.className,"_1k3v"),style:Object.assign({},(this.props.style||{}),{height:l.y,width:l.x})}),g.createElement(g.DOM.img,{className:"_1k3w",src:this.props.src,style:k.getPosition()})));}});e.exports=j;},null);
__d("PhotoZoomCropImage.react",["Event","React","UserAgent_DEPRECATED","Vector","Image.react","PhotoZoomCropImagePreview.react","cx","ix","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=h.createClass({displayName:'PhotoZoomCropImage',propTypes:{dimensions:h.PropTypes.object,enableDrag:h.PropTypes.bool,src:h.PropTypes.string},getDefaultProps:function(){return {enableDrag:true};},getInitialState:function(){return {moved:false};},componentDidMount:function(){var r=i.ie()<9?document.documentElement:window;this._listeners=g.listen(r,{mousemove:this._handleMouseMove.bind(this),mouseup:this._handleMouseUp.bind(this)});},componentWillUnmount:function(){for(var r in this._listeners){this._listeners[r]&&this._listeners[r].remove();this._listeners[r]=null;}},render:function(){var r=this.props.dimensions,s=r.getSize();return (h.createElement(h.DOM.div,Object.assign({},this.props,{className:p(this.props.className,"_4on5"),style:Object.assign({},(this.props.style||{}),{height:s.y,width:s.x})}),h.createElement(l,{dimensions:r,size:s,src:this.props.src}),h.createElement(h.DOM.div,{className:(("_3dfy")+(this.state.moved||!this.props.enableDrag?' '+"_3dfz":''))},h.createElement(h.DOM.span,{className:"_3df-"},h.createElement(k,{className:"_3-8_ _3df_",src:n('/images/ads/cropper/drag.png')}),"Drag to reposition photo")),h.createElement(h.DOM.img,{className:(("_4on7")+(!this.props.enableDrag?' '+"_3mk2":'')),onDragStart:g.prevent,onMouseDown:this._handleMouseDown,src:this.props.src,style:r.getPosition()})));},_handleMouseDown:function(r){if(this._position)return;r.preventDefault();this._position=j.getEventPosition(r);},_handleMouseMove:function(r){if(!this._position||!this.props.enableDrag)return;var s=j.getEventPosition(r),t=this._position.sub(s);this.props.onMove(t.x,t.y);this.setState({moved:true});this._position=s;},_handleMouseUp:function(){this._position=null;}});e.exports=q;},null);
__d("PhotoZoomCropSlider.react",["Keys","React","AbstractRangeInput.react","clamp","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=6,n=h.createClass({displayName:'PhotoZoomCropSlider',propTypes:{onZoom:h.PropTypes.func,zoom:h.PropTypes.number,zoomRange:h.PropTypes.object},render:function(){var o=this.props.zoomRange;return (h.createElement(h.DOM.div,{className:l(this.props.className,"_55vh")},h.createElement(h.DOM.div,{className:(("_55vi")+(o.min===this.props.zoom?' '+"_4obh":'')),onClick:this._minus,onKeyUp:this._minusIfValid,tabIndex:0},"−"),h.createElement(i,{className:"_55vj",disabled:o.max===o.min,max:o.max,min:o.min,onChange:this.props.onZoom,values:[this.props.zoom]}),h.createElement(h.DOM.div,{className:(("_55vk")+(o.max===this.props.zoom?' '+"_4obh":'')),onClick:this._plus,onKeyUp:this._plusIfValid,tabIndex:0},"+")));},_zoomInDirection:function(o){var p=this.props.zoomRange.max,q=this.props.zoomRange.min;this.props.onZoom([j(this.props.zoom+(o*(p-q)/m),q,p)]);},_minus:function(){this._zoomInDirection(-1);},_minusIfValid:function(event){if(event.which===g.RETURN)this._minus();},_plus:function(){this._zoomInDirection(1);},_plusIfValid:function(event){if(event.which===g.RETURN)this._plus();}});e.exports=n;},null);
__d("PhotoZoomCrop.react",["React","PhotoZoomCropDimensions","Image.react","PhotoZoomCropImage.react","PhotoZoomCropImagePreview.react","PhotoZoomCropSlider.react","cx","ix","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=g.createClass({displayName:'PhotoZoomCrop',propTypes:{center:g.PropTypes.object,cropSizeRatio:g.PropTypes.object,imageSize:g.PropTypes.object,previewSize:g.PropTypes.number,src:g.PropTypes.string,warningText:g.PropTypes.string},getDefaultProps:function(){return {previewSize:32};},getInitialState:function(){this._dims=new h(this.props.imageSize);if(this.props.center)this._dims.setCenter(this.props.center.x,this.props.center.y);if(this.props.cropSizeRatio){var q=this.props.cropSizeRatio.x*this.props.imageSize.x;this._dims.setZoom(this._dims.getSize().x/q);}return this._getDimensionsState();},render:function(){var q;if(this.state.zoom>1)q=g.createElement(g.DOM.div,{className:"_3p9d"},g.createElement(i,{className:"_3-90 _3p9e",src:n('/images/mobile/glyph/error-solid_white_s.png')}),this.props.warningText);return (g.createElement(g.DOM.div,{className:o("_4liw",this.props.className)},g.createElement(j,{className:"_1szc",dimensions:this._dims,onMove:this._handleMove,enableDrag:this._dims.hasSpaceToDrag(),src:this.props.src}),g.createElement(k,{className:"_1szd",dimensions:this._dims,size:{x:this.props.previewSize,y:this.props.previewSize},src:this.props.src}),g.createElement(l,{className:"_4lix",onZoom:this._handleZoom,zoom:this.state.zoom,zoomRange:this._dims.getZoomRange()}),q));},getDimensions:function(){return this._dims;},_handleZoom:function(q){this._dims.setZoom(q[0]);this.setState(this._getDimensionsState());},_handleMove:function(q,r){this._dims.moveByPixels(q,r);this.setState(this._getDimensionsState());},_getDimensionsState:function(){return {dimensions:this._dims.getPosition(),zoom:this._dims.getZoom()};}});e.exports=p;},null);
__d("ProfilePicDialogContentTypes",[],function(a,b,c,d,e,f){var g={CROPPER:'cropper',DRAG_DROP:'drag_and_drop'};e.exports=g;},null);
__d("XProfilePicCropViewerAsyncControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/profile\/picture\/crop_viewer\/",{photo_id:{type:"String",required:true},profile_id:{type:"Int",required:true},set_id:{type:"String",required:true}});},null);
__d("ProfilePicCropViewerStrings",["fbt","tx"],function(a,b,c,d,e,f,g,h){var i={BUTTON_CANCEL:"Cancelar",BUTTON_CLOSE:"Cerrar",BUTTON_SAVE:"Save Profile Picture",CROP_AND_SAVE:"Crop and save your profile picture",CROP_INSTRUCTIONS:"Move the box to where you want to crop your photo. Drag the corners in or out to adjust the size.",CROP_SAVING:"Saving Profile Picture...",LEAVE_WARNING_BODY:"The changes you made to your profile picture won't be saved if you close this dialog.",LEAVE_WARNING_CANCEL:"Stay on This Page",LEAVE_WARNING_OK:"Leave This Page",LEAVE_WARNING_TITLE:"Changes Not Saved",LEAVE_WARNING_UNLOAD:"The changes you made to your profile picture haven't been saved.",LOADING:"Cargando...",PREVIOUS_PIC:"You've used this photo as your profile picture before. Do you want to use it again?",PROFILE_PIC_VISIBILITY:"Tu foto de perfil actual siempre es p\u00fablica.",SAVED_BODY:"Your profile picture was successfully saved.",SAVED_TITLE:"Profile Picture Saved",UPLOADING:"Uploading...",SMALL_PHOTO_WARNING:"This photo has a low resolution and your profile picture will be less clear.",ZOOM_WARNING:"Zooming in this close will make your profile picture less clear."};e.exports=i;},null);
__d("ProfilePicCropViewerMixin",["AsyncResponse","DialogX","LayerDestroyOnHide","ProfilePicCropViewerStrings","ProfilePictureFlowLogging","React","Run","XProfilePicSaver","XUIDialogButton.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogTitle.react","tidyEvent"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=360,u=3000;function v(){var x=h.getTopmostLayer();if(!x)return;x.subscribeOnce('hide',v);x.hide();}var w={componentDidMount:function(){this._preventClose=true;m.onBeforeUnload(function(){if(this.isMounted()&&!this._shouldAllowClose())return j.LEAVE_WARNING_UNLOAD;}.bind(this),true);this._logFlowStep(k.step.VIEWER_INIT);},componentDidUpdate:function(x,y){if(!y.photoData&&this.state.photoData)this._logFlowStep(this.state.photoData.previousprofilepic?k.step.PREVIOUS_PIC_INIT:k.step.CROP);},componentWillUnmount:function(){this._warningDialog&&this._warningDialog.destroy();this._warningDialog=null;},getViewerID:function(){return this.props.setid;},_forceClose:function(){this._preventClose=false;this.close();this._logFlowStep(k.step.CANCEL);},handleCancel:function(){if(!this.props.warnOnCancel||this._shouldAllowClose())return this._forceClose();this._showCloseWarning();},handleSave:function(){this.setState({savingMode:true});this._preventClose=false;var x=new n(this.state.photoData.id,this.props.profileID).setFlowType(this.getFlowType());s([x.subscribe('success',this._savingSuccess),x.subscribe('error',this._savingError)]);if(this.state.photoData.previousprofilepic){x.saveAsProfilePic();}else{var y=this.getCropArea(),z=this.getPhotoSize();x.saveCroppedProfilePic({x:y.x/z.width,y:y.y/z.height,width:y.width/z.width,height:y.height/z.height});}},_logFlowStep:function(x){k.setFlowType(this.getFlowType()).log(x);},_savingSuccess:function(x,y){var z=new h({addedBehaviors:[i],autohide:u,width:t,xui:true},l.createElement(l.DOM.div,null,l.createElement(r,null,j.SAVED_TITLE),l.createElement(p,null,j.SAVED_BODY),l.createElement(q,null,l.createElement(o,{action:"cancel",label:j.BUTTON_CLOSE,use:"confirm"}))));z.subscribeOnce('hide',v);z.subscribeOnce('aftershow',this.close);z.show();},_savingError:function(x,y){this._preventClose=true;this.setState({savingMode:false});g.defaultErrorHandler(y);this.inform('save_error',y);},_shouldAllowClose:function(){return !this._preventClose;},_showCloseWarning:function(){if(!this._warningDialog)this._warningDialog=new h({modal:true,width:t,xui:true},l.createElement(l.DOM.div,null,l.createElement(r,null,j.LEAVE_WARNING_TITLE),l.createElement(p,null,j.LEAVE_WARNING_BODY),l.createElement(q,null,l.createElement(o,{action:"cancel",label:j.LEAVE_WARNING_CANCEL}),l.createElement(o,{action:"cancel",onClick:this._forceClose,label:j.LEAVE_WARNING_OK,use:"confirm"}))));this._warningDialog.show();}};e.exports=w;},null);
__d("SpotlightProfilePicCropOptions",[],function(a,b,c,d,e,f){var g=2.5,h=.8,i=320,j={getOptions:function(k,l){var m={},n=Math.min(l.x,l.y),o,p,q=k.facebox;if(q){p=Math.max(q.size.x*l.x,q.size.y*l.y)*g;o=q.center;}else{p=h*n;if(k.focus)o=k.focus;}var r=l.x/k.original.width;m.height=m.width=Math.min(Math.max(p,i*r),n);if(o){m.center_x=Math.min(Math.max(o.x*l.x,m.width/2),l.x-m.width/2);m.center_y=Math.min(Math.max(o.y*l.y,m.height/2),l.y-m.height/2);}return m;},getOptionsAsRatio:function(k,l){var m=j.getOptions(k,l),n=Math.min(l.x,l.y);return {center:{x:m.center_x?m.center_x/l.x:.5,y:m.center_y?m.center_y/l.y:.5},size:{x:m.width/n,y:m.height/n}};}};e.exports=j;},null);
__d("ProfilePicCropViewerLoading.react",["React","XUISpinner.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){var k=g.createClass({displayName:'ProfilePicCropViewerLoading',render:function(){return (g.createElement(g.DOM.div,{className:j("_53q1",this.props.className)},g.createElement(h,{background:"dark",className:"_4-cf",size:"large"})));}});e.exports=k;},null);
__d("SpotlightProfilePicCropViewer",["ArbiterMixin","Photocrop2","ProfilePicCropViewerMixin","ProfilePicCropViewerStrings","ProfilePictureFlowLogging","React","SpotlightProfilePicCropOptions","SpotlightViewer","SpotlightViewerAutoResize","SpotlightViewerBehaviorsMixin","SpotlightViewerCoreMixin","SpotlightViewerDimensionMixin","ProfilePicCropViewerLoading.react","XUIButton.react","XUIDialogFooter.react","XUIGrayText.react","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x=l.PropTypes,y="_1rnz",z=420,aa=l.createClass({displayName:'SpotlightProfilePicCropViewer',propTypes:{profileID:x.string.isRequired,setid:x.string.isRequired,uploading:x.bool,warnOnCancel:x.bool},mixins:[g,i,p,q,r],behaviors:[o],getDefaultProps:function(){return {minHeight:320,verticalPadding:180};},getInitialState:function(){return {photoData:null,open:this.props.open,savingMode:false};},componentDidMount:function(){this._enableCropping();},componentDidUpdate:function(){setTimeout(this._enableCropping,1);},componentWillUnmount:function(){this._disableCropping();this._subscriptions&&this._subscriptions.release();this._subscriptions=null;},render:function(){var ba,ca,da={height:this.getStageDimensions().y};if(!this.state.photoData){ca=j.LOADING;da={width:z,height:z};}else ca=this.state.photoData.previousprofilepic?j.PREVIOUS_PIC:j.CROP_INSTRUCTIONS;if(this.state.savingMode){ba=l.createElement(v,{className:y,shade:"medium",weight:"bold"},j.CROP_SAVING);}else if(this.state.photoData){ba=[l.createElement(t,{label:j.BUTTON_CANCEL,onClick:this.handleCancel}),l.createElement(t,{label:j.BUTTON_SAVE,onClick:this.handleSave,use:"confirm"})];}else if(this.props.uploading)ba=l.createElement(v,{className:y,shade:"medium",weight:"bold"},j.UPLOADING);var ea;if(!this.state.photoData||this.state.savingMode)ea=l.createElement(s,null);return (l.createElement(n,{className:"_2yue",onBeforeHide:this._shouldAllowClose,onHide:this.close,open:this.state.open},l.createElement(l.DOM.div,{className:"_2he6"},l.createElement(v,{display:"block",shade:"medium",size:"medium",weight:"bold"},j.CROP_AND_SAVE),l.createElement(v,{display:"block",shade:"medium",size:"small"},ca)),l.createElement(l.DOM.div,{className:"_2he4",style:da},this.getMedia(),ea),l.createElement(u,{leftContent:l.createElement(v,{className:y,shade:"medium"},j.PROFILE_PIC_VISIBILITY)},ba)));},_disableCropping:function(){this._photocrop&&this._photocrop.done();this._photocrop=null;},_enableCropping:function(){this._photocrop&&this._photocrop.reset();var ba=this.state.photoData;if(!this.refs.image||this._photocrop||ba.previousprofilepic)return;var ca=this.getImageDimensions();this._photocrop=new h(this.refs.image.getDOMNode(),m.getOptions(ba,ca),this.getDimensions().getOriginalDimensionsFromPhoto(ba));},getCropArea:function(){return this._photocrop.done(true);},getFlowType:function(){return k.flow.SPOTLIGHT;},getPhotoSize:function(){var ba=this.getDimensions().getOriginalDimensionsFromPhoto(this.state.photoData);return {height:ba.y,width:ba.x};}});e.exports=aa;},null);
__d("ZoomProfilePicCropViewerBody.react",["BasicVector","ProfilePicCropViewerStrings","React","SpotlightProfilePicCropOptions","SpotlightViewerDimensionMixin","cx","ProfilePicCropViewerLoading.react","PhotoZoomCrop.react"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=320,p=22,q=i.createClass({displayName:'ZoomProfilePicCropViewerBody',mixins:[k],propTypes:{height:i.PropTypes.number.isRequired,photoData:i.PropTypes.object,savingMode:i.PropTypes.bool.isRequired,uploading:i.PropTypes.bool,warnOnCancel:i.PropTypes.bool,width:i.PropTypes.number.isRequired},render:function(){var r=this.props.photoData,s=new g(this.props.width-p,this.props.height-p),t,u;if(r&&r.previousprofilepic){u=this.getDimensions().getImageDimensionsForStage({x:r.image1.width,y:r.image1.height},s);t=i.createElement(i.DOM.img,{className:"_3mdu",height:u.y,src:r.image1.uri,width:u.x});}else if(r){u=new g(r.original.width,r.original.height);var v=j.getOptionsAsRatio(r,u),w=u.x<o||u.y<o?h.SMALL_PHOTO_WARNING:h.ZOOM_WARNING;t=i.createElement(n,{className:this.props.className,center:v.center,cropSizeRatio:v.size,imageSize:u,ref:"zoomCrop",src:r.original.uri,warningText:w});}var x;if(!this.props.photoData){x=i.createElement(m,{className:"_3mdt"});}else if(this.props.savingMode)x=i.createElement(m,null);return (i.createElement(i.DOM.div,{className:"_3mds",style:{minHeight:this.props.height}},t,x));},getDimensionsArea:function(){return this.refs.zoomCrop.getDimensions().getArea();}});e.exports=q;},null);
__d("ZoomProfilePicCropViewer.react",["ArbiterMixin","ProfilePicCropViewerMixin","ProfilePicCropViewerStrings","ProfilePictureFlowLogging","React","SpotlightViewerCoreMixin","SpotlightViewerDimensionMixin","XUIButton.react","XUIDialog.react","XUIDialogFooter.react","XUIDialogTitle.react","XUIGrayText.react","ZoomProfilePicCropViewerBody.react","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u="_3mdr",v=460,w=520,x=k.createClass({displayName:'ZoomProfilePicCropViewer',mixins:[g,h,l,m],propTypes:{profileID:k.PropTypes.string.isRequired,setid:k.PropTypes.string.isRequired,uploading:k.PropTypes.bool,warnOnCancel:k.PropTypes.bool},getInitialState:function(){return {open:true,photoData:null,savingMode:false};},render:function(){var y=this.state.photoData,z=i.CROP_AND_SAVE,aa;if(!y){z=i.LOADING;}else if(y.previousprofilepic){z=i.BUTTON_SAVE;}else z=i.CROP_AND_SAVE;if(this.state.savingMode){aa=k.createElement(r,{className:u,shade:"medium",weight:"bold"},i.CROP_SAVING);}else if(y){aa=[k.createElement(n,{label:i.BUTTON_CANCEL,onClick:this.handleCancel}),k.createElement(n,{label:i.BUTTON_SAVE,onClick:this.handleSave,use:"confirm"})];}else if(this.props.uploading)aa=k.createElement(r,{className:u,shade:"medium",weight:"bold"},i.UPLOADING);return (k.createElement(o,{layerHideOnBlur:false,modal:true,shown:true,width:w},k.createElement(q,{showCloseButton:false},k.createElement(r,{display:"block",shade:"medium",size:"medium",weight:"bold"},z)),k.createElement(s,{height:v,photoData:this.state.photoData,photoid:this.props.photoid,profileID:this.props.profileID,ref:"zoomBody",savingMode:this.state.savingMode,setid:this.props.setid,uploading:this.props.options&&this.props.options.uploading,warnOnCancel:this.props.options&&this.props.options.warnOnCancel,width:w}),k.createElement(p,{leftContent:k.createElement(r,{className:u,shade:"medium"},i.PROFILE_PIC_VISIBILITY)},aa)));},getCropArea:function(){return this.refs.zoomBody.getDimensionsArea();},getFlowType:function(){return j.flow.ZOOMCROP;},getPhotoSize:function(){return this.state.photoData.original;}});e.exports=x;},null);
__d("ProfilePicDialogContentContainer",["Button","DOM","React","ProfilePicDialogContentTypes","ProfilePicDialogContent.react","tidyEvent"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m,n,o,p,q;function r(){g.setEnabled(p,true);}function s(){g.setEnabled(p,false);}function t(u,v,w){"use strict";o=u;q=w;m=i.renderComponent(i.createElement(k,{profileID:v,uploadPath:w,viewType:j.DRAG_DROP}),o);}t.renderCropper=function(u,v,w,x,y,z){"use strict";if(n!==w){s();n=w;}m=i.renderComponent(i.createElement(k,{photoid:u,photoUpdateCallback:r,profileID:v,setid:w,uploading:x,uploadPath:q,viewType:j.CROPPER,warnOnCancel:y}),o);m.subscribeOnce('close',function(){z&&z();});l(m.subscribe('save_error',r));return m;};t.initDialogEvents=function(u,v){"use strict";p=v;s();l(u.subscribe(['hide','confirm'],function(w){if(w==='hide'){m.unmountComponent();h.remove(o);}else if(g.isEnabled(p)){s();m.handleSave();}}));};e.exports=t;},null);
__d("ProfilePicCropViewerInit",["ProfilePicCropViewerGating","ProfilePictureFlowLogging","React","XProfilePicCropViewerAsyncControllerURIBuilder"],function(a,b,c,d,e,f,g,h,i,j){var k='profile-picture-crop',l='loading',m=h.flow,n;function o(q,r,s){if(!p.useCropViewer()&&s&&!s.useIntegratedCrop)return false;d(['SpotlightViewerInit','SpotlightProfilePicCropViewer','ZoomProfilePicCropViewer.react','PhotoStore','AsyncRequest','AsyncResponse','ProfilePicDialogContentContainer'],function(t,u,v,w,x,y,z){p.close();var aa=k+':'+q+':'+r;if(s&&s.useIntegratedCrop){n=z.renderCropper(q,r,aa,s&&s.uploading,s&&s.warnOnCancel,function(){n=null;});}else{var ba=g.zoomcrop?v:u;n=t.render(i.createElement(ba,{open:true,photoid:q,profileID:r,setid:aa,uploading:s&&s.uploading,warnOnCancel:s&&s.warnOnCancel}),function(){n=null;});}if(!w.hasBeenCreated(aa)&&q!==l)new x(new j().setString('photo_id',q).setInt('profile_id',r).setString('set_id',aa).getURI()).setErrorHandler(function(ca,da){if(ca===aa)p.close();y.defaultErrorHandler(da);}.bind(this,aa)).send();});return true;}var p={close:function(){n&&n.close();},getFlowType:function(){return g.viewer?(g.zoomcrop?m.ZOOMCROP:m.SPOTLIGHT):m.SNOWLIFT;},useCropViewer:function(){return g.viewer;},loading:function(q,r){o(l,q,r);},loadID:o};e.exports=p;},null);
__d("ProfilePicUploadToCrop",["FileInputUploader","PhotoViewer","ProfilePicCropViewerInit","ProfilePictureFlowLogging","URI","tidyEvent"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){return i.getFlowType();}function n(){j.setFlowType(m()).log(j.step.UPLOAD_SUCCESS);}function o(p,q,r,s,t){"use strict";var u=q.getInput();if(!u.name)u.name='photo';l(q.subscribe('change',function(){if(!q.getValue())return;j.setFlowType(m()).log(j.step.UPLOAD_SELECT);t=String(t);i.loading(t,{uploading:true});var v=new g(u).setURI(p).setAllowCrossOrigin(true);l([v.subscribe('success',function(w,x){q.clear();var y=x.response.getPayload();if(i.useCropViewer()){o.loadCropper(y,t);return;}n();h.bootstrap(k(y.photo_url).addQueryData('makeprofile',1).addQueryData('pp_source',s),r);}),v.subscribe('failure',function(){q.clear();i.close();j.setFlowType(m()).log(j.step.FAIL);})]);v.send();}));}o.loadCropper=function(p,q){"use strict";n();i.loadID(p.fbid,q,{warnOnCancel:true});};e.exports=o;},null);
__d("ProfilePicDialogDragDropView.react",["ProfilePicUploadToCrop","React","FileInput.react","Image.react","XUIButton.react","XUIText.react","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=h.PropTypes,q=h.createClass({displayName:'ProfilePicDialogDragDropView',propTypes:{profileID:p.string.isRequired,uploadPath:p.string.isRequired},render:function(){return (h.createElement(h.DOM.div,{className:"_4-ia"},h.createElement(j,{className:"_4-ib",src:o('/images/profile_pic_dialog_drag_icon.png')}),h.createElement(l,{className:"_4-ig _3-8y",display:"block",weight:"bold"},"Drag photo here",h.createElement(h.DOM.div,{className:"_4-ih _3-8- _3-98"},"or")),h.createElement(i,{accept:"image/*",name:"newImage",ref:"fileInput"},h.createElement(k,{href:{url:'#'},label:"Upload Photo",size:"xlarge"}))));},componentDidMount:function(){var r=this.refs.fileInput;new g(this.props.uploadPath,r.getFileInput(),r.getDOMNode(),'',parseInt(this.props.profileID,10));}});e.exports=q;},null);
__d("ZoomProfilePicIntegratedCropViewer.react",["ArbiterMixin","ProfilePicCropViewerMixin","ProfilePictureFlowLogging","React","SpotlightViewerCoreMixin","SpotlightViewerDimensionMixin","ZoomProfilePicCropViewerBody.react","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=512,p=504,q=j.createClass({displayName:'ZoomProfilePicIntegratedCropViewer',mixins:[g,h,k,l],propTypes:{photoid:j.PropTypes.string.isRequired,photoUpdateCallback:j.PropTypes.func,profileID:j.PropTypes.string.isRequired,setid:j.PropTypes.string.isRequired},getInitialState:function(){return {open:true,photoData:null,savingMode:false};},render:function(){return (j.createElement(m,Object.assign({},this.props,{className:"_53ch",height:o,photoData:this.state.photoData,ref:"zoomBody",savingMode:this.state.savingMode,width:p})));},getCropArea:function(){return this.refs.zoomBody.getDimensionsArea();},getFlowType:function(){return i.flow.ZOOMCROP;},getPhotoSize:function(){return this.state.photoData.original;},componentWillReceiveProps:function(r){if(r.setid!==this.props.setid)this.setState({photoData:null});},shouldComponentUpdate:function(r,s){return !s.photoData||r.photoid===s.photoData.id;},componentDidUpdate:function(r,s){if(r.setid!==this.props.setid)this.__displayPhoto();if(this.state.photoData&&this.props.photoUpdateCallback&&s.photoData!==this.state.photoData)this.props.photoUpdateCallback();},componentDidMount:function(){if(this.state.photoData&&this.props.photoUpdateCallback)this.props.photoUpdateCallback();}});e.exports=q;},null);
__d("ProfilePicDialogContent.react",["ArbiterMixin","ProfilePicDialogContentTypes","ProfilePicCropViewerInit","ProfilePicUploadToCrop","React","SinglePictureUploadTarget","ProfilePicDialogDragDropView.react","ZoomProfilePicIntegratedCropViewer.react","getObjectValues","tidyEvent"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=k.PropTypes,r=k.createClass({displayName:'ProfilePicDialogContent',mixins:[g],propTypes:{profileID:q.string.isRequired,uploadPath:q.string.isRequired,viewType:q.oneOf(o(h)).isRequired},render:function(){var s;switch(this.props.viewType){case h.DRAG_DROP:s=k.createElement(m,Object.assign({},this.props,{ref:"view"}));break;case h.CROPPER:s=k.createElement(n,Object.assign({},this.props,{ref:"view"}));break;}return (k.createElement(k.DOM.div,null,s));},close:function(){this.inform('close');},setUploadTargetLoadingCallback:function(s,t){t.setPreprocessCallback(function(u){i.loading(s,{uploading:true});});},setUploadTargetSuccessCallback:function(s,t){t.setAfterSuccessCallback(function(u){j.loadCropper(u,s);});},handleSave:function(){this.refs.view.handleSave();},componentDidMount:function(){var s=this.props.profileID,t=new l(this.getDOMNode(),this.props.uploadPath);this.setUploadTargetLoadingCallback(s,t);this.setUploadTargetSuccessCallback(s,t);t.setAllowCrossOrigin(true).activate();},componentWillUnmount:function(){this.inform('close');},componentDidUpdate:function(){if(!this._cropperHasSubscribed&&this.props.viewType===h.CROPPER){this._cropperHasSubscribed=true;p(this.refs.view.subscribe('save_error',this.inform));}}});e.exports=r;},null);
__d("MakeProfilePicInit",["DataStore","ProfilePicCropViewerInit","PhotoViewer","URI"],function(a,b,c,d,e,f,g,h,i,j){var k='navigation-type',l='integrated_navigation',m={handleOptimus:function(n,o,p){p.prevent();var q=g.get(o,k)===l,r=j(o.getAttribute('ajaxify')||o.href),s=r.getQueryData();if(s.fbid&&s.profile_id){h.loadID(s.fbid,s.profile_id,{useIntegratedCrop:q});}else i.bootstrap(r,o);}};e.exports=m;},null);